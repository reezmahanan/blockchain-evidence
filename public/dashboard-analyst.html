<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="favicon.png" type="image/png">
    <link rel="shortcut icon" href="favicon.png" type="image/png">
    <title>Analyst | EVID-DGC</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="responsive-improvements.css">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="fixed-navbar.js"></script>
    <style>
        .analyst-hero {
            background: linear-gradient(135deg, #7c3aed, #a855f7);
            color: white;
            padding: 40px 0;
            text-align: center;
            margin-bottom: 30px;
        }

        .hero-content h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .analysis-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            display: block;
        }

        .analysis-tools {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .tool-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .tool-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .tool-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            display: block;
            color: #7c3aed;
        }

        .evidence-queue {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .evidence-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #7c3aed;
        }

        .priority-high {
            border-left-color: #ef4444;
        }

        .priority-medium {
            border-left-color: #f59e0b;
        }

        .priority-low {
            border-left-color: #10b981;
        }

        .analysis-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .status-pending {
            background: #fef3c7;
            color: #92400e;
        }

        .status-processing {
            background: #dbeafe;
            color: #1e40af;
        }

        .status-complete {
            background: #d1fae5;
            color: #065f46;
        }
    </style>
</head>

<body>
    <!-- Navbar will be injected by navbar.js -->

    <!-- Hero Section -->
    <div class="analyst-hero">
        <div class="container">
            <div class="hero-content">
                <h1>üî¨ Forensic Analyst Dashboard</h1>
                <p>Advanced digital forensics and evidence analysis</p>
                <div class="analysis-stats">
                    <div class="stat-card">
                        <span class="stat-number" id="pendingAnalysis">7</span>
                        <span>Pending Analysis</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" id="completedAnalysis">15</span>
                        <span>Completed</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" id="activeTools">4</span>
                        <span>Active Tools</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Analysis Tools -->
        <div class="card">
            <div class="card-header">
                <h2>üõ†Ô∏è Analysis Tools</h2>
                <p>Professional forensic analysis toolkit</p>
            </div>
            <div class="card-body">
                <div class="analysis-tools">
                    <div class="tool-card" onclick="openDigitalForensics()">
                        <span class="tool-icon">üíª</span>
                        <h3>Digital Forensics</h3>
                        <p>Analyze digital devices, recover deleted files, and extract metadata</p>
                    </div>
                    <div class="tool-card" onclick="openDNAAnalysis()">
                        <span class="tool-icon">üß¨</span>
                        <h3>DNA Analysis</h3>
                        <p>Process biological samples and generate DNA profiles</p>
                    </div>
                    <div class="tool-card" onclick="openBallistics()">
                        <span class="tool-icon">üéØ</span>
                        <h3>Ballistics</h3>
                        <p>Analyze firearms, bullets, and trajectory patterns</p>
                    </div>
                    <div class="tool-card" onclick="openToxicology()">
                        <span class="tool-icon">‚öóÔ∏è</span>
                        <h3>Toxicology</h3>
                        <p>Chemical analysis and substance identification</p>
                    </div>
                    <div class="tool-card" onclick="openDocumentAnalysis()">
                        <span class="tool-icon">üìÑ</span>
                        <h3>Document Analysis</h3>
                        <p>Handwriting analysis and document authentication</p>
                    </div>
                    <div class="tool-card" onclick="openImageAnalysis()">
                        <span class="tool-icon">üì∏</span>
                        <h3>Image Analysis</h3>
                        <p>Photo enhancement and digital image forensics</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Evidence Queue -->
        <div class="card">
            <div class="card-header">
                <h2>üìã Evidence Analysis Queue</h2>
                <button class="btn btn-outline btn-sm" onclick="refreshQueue()">
                    <i data-lucide="refresh-cw"></i>
                    Refresh Queue
                </button>
            </div>
            <div class="card-body">
                <div class="evidence-queue" id="evidenceQueue">
                    <div class="evidence-card priority-high">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <h3>Digital Device Analysis</h3>
                            <span class="analysis-status status-pending">PENDING</span>
                        </div>
                        <p><strong>Case ID:</strong> FOR-2024-001</p>
                        <p><strong>Evidence:</strong> Smartphone (iPhone 14)</p>
                        <p><strong>Priority:</strong> <span style="color: #ef4444; font-weight: bold;">HIGH</span></p>
                        <p><strong>Requested:</strong> March 15, 2024</p>
                        <div style="margin-top: 15px;">
                            <button class="btn btn-sm btn-primary" onclick="startAnalysis('FOR-2024-001')">Start Analysis</button>
                            <button class="btn btn-sm btn-outline" onclick="viewEvidenceDetails('FOR-2024-001')">View Details</button>
                        </div>
                    </div>

                    <div class="evidence-card priority-medium">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <h3>DNA Sample Processing</h3>
                            <span class="analysis-status status-processing">PROCESSING</span>
                        </div>
                        <p><strong>Case ID:</strong> FOR-2024-002</p>
                        <p><strong>Evidence:</strong> Blood Sample #BS-001</p>
                        <p><strong>Priority:</strong> <span style="color: #f59e0b; font-weight: bold;">MEDIUM</span></p>
                        <p><strong>Started:</strong> March 14, 2024</p>
                        <div style="margin-top: 15px;">
                            <button class="btn btn-sm btn-warning" onclick="continueAnalysis('FOR-2024-002')">Continue Analysis</button>
                            <button class="btn btn-sm btn-outline" onclick="showProgressReport('FOR-2024-002')">Progress Report</button>
                        </div>
                    </div>

                    <div class="evidence-card priority-low">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <h3>Document Verification</h3>
                            <span class="analysis-status status-complete">COMPLETE</span>
                        </div>
                        <p><strong>Case ID:</strong> FOR-2024-003</p>
                        <p><strong>Evidence:</strong> Handwritten Note</p>
                        <p><strong>Priority:</strong> <span style="color: #10b981; font-weight: bold;">LOW</span></p>
                        <p><strong>Completed:</strong> March 13, 2024</p>
                        <div style="margin-top: 15px;">
                            <button class="btn btn-sm btn-success" onclick="viewAnalysisReport('FOR-2024-003')">View Report</button>
                            <button class="btn btn-sm btn-outline" onclick="archiveEvidence('FOR-2024-003')">Archive</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Lab Equipment Status -->
        <div class="card">
            <div class="card-header">
                <h2>üî¨ Lab Equipment Status</h2>
                <p>Real-time equipment monitoring</p>
            </div>
            <div class="card-body">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                    <div
                        style="background: #f0fdf4; padding: 20px; border-radius: 8px; border-left: 4px solid #22c55e;">
                        <h4>üñ•Ô∏è Digital Workstation</h4>
                        <p><strong>Status:</strong> <span style="color: #22c55e;">ONLINE</span></p>
                        <p><strong>Usage:</strong> 45% CPU, 60% RAM</p>
                    </div>
                    <div
                        style="background: #f0fdf4; padding: 20px; border-radius: 8px; border-left: 4px solid #22c55e;">
                        <h4>üß¨ DNA Sequencer</h4>
                        <p><strong>Status:</strong> <span style="color: #22c55e;">RUNNING</span></p>
                        <p><strong>Progress:</strong> Sample 2 of 3</p>
                    </div>
                    <div
                        style="background: #fefce8; padding: 20px; border-radius: 8px; border-left: 4px solid #eab308;">
                        <h4>üì∏ Image Scanner</h4>
                        <p><strong>Status:</strong> <span style="color: #eab308;">MAINTENANCE</span></p>
                        <p><strong>Next Service:</strong> March 20, 2024</p>
                    </div>
                    <div
                        style="background: #f0fdf4; padding: 20px; border-radius: 8px; border-left: 4px solid #22c55e;">
                        <h4>‚öóÔ∏è Chemical Analyzer</h4>
                        <p><strong>Status:</strong> <span style="color: #22c55e;">READY</span></p>
                        <p><strong>Calibration:</strong> Valid until Apr 2024</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentUser = null;

        document.addEventListener('DOMContentLoaded', function () {
            lucide.createIcons();
            initializeDashboard();
        });

        async function initializeDashboard() {
            try {
                const userAccount = localStorage.getItem('currentUser');
                if (!userAccount) {
                    window.location.href = 'index.html';
                    return;
                }

                // Get user data from localStorage
                let userData = JSON.parse(localStorage.getItem('evidUser_' + userAccount) || '{}');

                if (!userData.role) {
                    alert('User data not found. Please login again.');
                    logout();
                    return;
                }

                // Role check disabled for development

                currentUser = userData;
                updateUserInterface();
                loadDashboardData();

            } catch (error) {
                console.error('Dashboard initialization error:', error);
                alert('Failed to load dashboard. Please try again.');
            }
        }

        function updateUserInterface() {
            const isTestUser = localStorage.getItem('testUserMode') === 'true';
            const userName = currentUser.fullName || 'Forensic Analyst';

            document.getElementById('userRole').textContent = isTestUser ?
                `üî¨ ${userName} (Test)` : `üî¨ Forensic Analyst`;

            if (currentUser.walletAddress) {
                document.getElementById('userWallet').textContent =
                    currentUser.walletAddress.slice(0, 6) + '...' + currentUser.walletAddress.slice(-4);
            }
        }

        function loadDashboardData() {
            // Simulate loading dashboard statistics
            document.getElementById('pendingAnalysis').textContent = '7';
            document.getElementById('completedAnalysis').textContent = '15';
            document.getElementById('activeTools').textContent = '4';
        }

        function openDigitalForensics() {
            alert('üíª Digital Forensics Tool\n\nThis advanced tool provides:\n‚Ä¢ File system analysis\n‚Ä¢ Deleted file recovery\n‚Ä¢ Metadata extraction\n‚Ä¢ Timeline reconstruction\n‚Ä¢ Hash verification\n‚Ä¢ Network traffic analysis');
        }

        function openDNAAnalysis() {
            alert('üß¨ DNA Analysis Tool\n\nProfessional DNA processing:\n‚Ä¢ Sample preparation protocols\n‚Ä¢ STR analysis\n‚Ä¢ CODIS database comparison\n‚Ä¢ Mixture interpretation\n‚Ä¢ Statistical calculations\n‚Ä¢ Report generation');
        }

        function openBallistics() {
            alert('üéØ Ballistics Analysis Tool\n\nFirearms examination:\n‚Ä¢ Bullet comparison\n‚Ä¢ Cartridge case analysis\n‚Ä¢ Trajectory reconstruction\n‚Ä¢ Gunshot residue testing\n‚Ä¢ Tool mark identification\n‚Ä¢ 3D modeling');
        }

        function openToxicology() {
            alert('‚öóÔ∏è Toxicology Analysis Tool\n\nChemical analysis suite:\n‚Ä¢ Substance identification\n‚Ä¢ Concentration measurement\n‚Ä¢ Drug screening\n‚Ä¢ Poison detection\n‚Ä¢ Metabolite analysis\n‚Ä¢ Chain of custody tracking');
        }

        function openDocumentAnalysis() {
            alert('üìÑ Document Analysis Tool\n\nDocument examination:\n‚Ä¢ Handwriting comparison\n‚Ä¢ Ink analysis\n‚Ä¢ Paper authentication\n‚Ä¢ Alteration detection\n‚Ä¢ Digital document forensics\n‚Ä¢ Signature verification');
        }

        function openImageAnalysis() {
            alert('üì∏ Image Analysis Tool\n\nDigital image forensics:\n‚Ä¢ Photo enhancement\n‚Ä¢ Metadata analysis\n‚Ä¢ Tampering detection\n‚Ä¢ Facial recognition\n‚Ä¢ Object identification\n‚Ä¢ 3D reconstruction');
        }

        function refreshQueue() {
            alert('üîÑ Refreshing analysis queue...\n\nUpdating:\n‚Ä¢ New evidence submissions\n‚Ä¢ Priority changes\n‚Ä¢ Analysis progress\n‚Ä¢ Equipment availability\n‚Ä¢ Lab scheduling');
        }

        function startAnalysis(caseId) {
            alert('üî¨ Starting Analysis\n\nCase ID: ' + caseId + '\n\nInitializing:\n‚Ä¢ Evidence verification\n‚Ä¢ Lab equipment preparation\n‚Ä¢ Protocol selection\n‚Ä¢ Analysis workflow\n‚Ä¢ Documentation setup');
            // Add your analysis start logic here
        }

        function viewEvidenceDetails(caseId) {
            alert('üìã Evidence Details\n\nCase ID: ' + caseId + '\n\nViewing:\n‚Ä¢ Evidence metadata\n‚Ä¢ Chain of custody\n‚Ä¢ Collection information\n‚Ä¢ Storage location\n‚Ä¢ Related documents');
            // Redirect to evidence details page or open modal
        }

        function continueAnalysis(caseId) {
            alert('‚ñ∂Ô∏è Continue Analysis\n\nCase ID: ' + caseId + '\n\nResuming:\n‚Ä¢ Previous analysis state\n‚Ä¢ Work in progress\n‚Ä¢ Partial results\n‚Ä¢ Next analysis steps\n‚Ä¢ Equipment allocation');
            // Add your continue analysis logic here
        }

        function showProgressReport(caseId) {
            alert('üìä Progress Report\n\nCase ID: ' + caseId + '\n\nShowing:\n‚Ä¢ Completion percentage\n‚Ä¢ Timeline status\n‚Ä¢ Tasks completed\n‚Ä¢ Pending procedures\n‚Ä¢ Resource utilization');
            // Display progress report modal or page
        }

        function viewAnalysisReport(caseId) {
            alert('üìÑ Analysis Report\n\nCase ID: ' + caseId + '\n\nReport includes:\n‚Ä¢ Methodology\n‚Ä¢ Findings\n‚Ä¢ Conclusions\n‚Ä¢ Supporting data\n‚Ä¢ Expert opinion\n‚Ä¢ Recommendations');
            // Redirect to report viewer
        }

        function archiveEvidence(caseId) {
            if (confirm('Archive this evidence?\n\nCase ID: ' + caseId + '\n\nThis will move the evidence to the archive and mark analysis as complete.')) {
                alert('‚úÖ Evidence Archived\n\nCase ID: ' + caseId + '\n\nArchived successfully:\n‚Ä¢ Analysis complete\n‚Ä¢ Report finalized\n‚Ä¢ Data preserved\n‚Ä¢ Storage updated');
                // Add your archive logic here
            }
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                localStorage.clear();
                window.location.href = 'index.html';
            }
        }
    </script>
    <script src="footer.js"></script>
</body>

</html>