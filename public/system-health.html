<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="favicon.png" type="image/png">
    <link rel="shortcut icon" href="favicon.png" type="image/png">
    <title>System Health & Status - EVID-DGC</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="responsive-improvements.css">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>

<body>
    <nav class="dashboard-nav">
        <div class="container">
            <div class="nav-content">
                <div class="nav-items">
                    <a href="admin.html" class="nav-brand">
                        <i data-lucide="shield" class="brand-icon"></i>
                        EVID-DGC Admin
                    </a>
                    <span class="nav-separator">|</span>
                    <span class="nav-title">System Health & Status</span>
                </div>
                <div class="nav-items">
                    <button class="btn btn-outline btn-sm" onclick="window.location.href='admin.html'">
                        <i data-lucide="arrow-left"></i>
                        Back to Admin
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="dashboard-hero">
            <h1>System Health & Status Dashboard</h1>
            <p>Real-time monitoring of all system components and services</p>
        </div>

        <!-- Auto-refresh controls -->
        <div class="refresh-controls">
            <div class="refresh-status">
                <span id="lastUpdated">Last updated: Never</span>
                <span class="refresh-indicator">
                    <i data-lucide="clock"></i>
                    Auto-refresh: <span id="refreshCountdown">60</span>s
                </span>
            </div>
            <div class="refresh-actions">
                <button class="btn btn-sm" id="refreshNow">
                    <i data-lucide="refresh-cw"></i>
                    Refresh Now
                </button>
                <button class="btn btn-outline btn-sm" id="toggleAutoRefresh">
                    <i data-lucide="pause"></i>
                    Pause Auto-refresh
                </button>
            </div>
        </div>

        <!-- Overall System Status -->
        <div class="status-overview">
            <div class="status-card overall-status" id="overallStatus">
                <div class="status-icon">
                    <i data-lucide="activity"></i>
                </div>
                <div class="status-info">
                    <h3>System Status</h3>
                    <div class="status-value" id="overallStatusValue">All Systems Operational</div>
                    <div class="status-description">All system components are functioning normally</div>
                </div>
            </div>
        </div>

        <!-- Component Status Grid -->
        <div class="status-grid">
            <!-- Blockchain Status -->
            <div class="status-card">
                <div class="status-header">
                    <div class="status-icon">
                        <i data-lucide="link"></i>
                    </div>
                    <h3>Blockchain Status</h3>
                    <div class="status-indicator">
                        <div class="status-dot online"></div>
                    </div>
                </div>
                <div class="status-details">
                    <div class="detail-item">
                        <span>Network:</span>
                        <span>Ethereum Mainnet</span>
                    </div>
                    <div class="detail-item">
                        <span>Chain ID:</span>
                        <span>1</span>
                    </div>
                    <div class="detail-item">
                        <span>Last Block:</span>
                        <span>#18,456,789</span>
                    </div>
                    <div class="detail-item">
                        <span>Contract Address:</span>
                        <span class="monospace">0x742d35Cc6634C0532925a3b8D</span>
                    </div>
                </div>
            </div>

            <!-- Database Status -->
            <div class="status-card">
                <div class="status-header">
                    <div class="status-icon">
                        <i data-lucide="database"></i>
                    </div>
                    <h3>Database Status</h3>
                    <div class="status-indicator">
                        <div class="status-dot online"></div>
                    </div>
                </div>
                <div class="status-details">
                    <div class="detail-item">
                        <span>Connection:</span>
                        <span>Connected</span>
                    </div>
                    <div class="detail-item">
                        <span>Response Time:</span>
                        <span>45ms</span>
                    </div>
                    <div class="detail-item">
                        <span>Active Connections:</span>
                        <span>12</span>
                    </div>
                </div>
            </div>

            <!-- Storage Status -->
            <div class="status-card">
                <div class="status-header">
                    <div class="status-icon">
                        <i data-lucide="hard-drive"></i>
                    </div>
                    <h3>Storage Status</h3>
                    <div class="status-indicator">
                        <div class="status-dot online"></div>
                    </div>
                </div>
                <div class="status-details">
                    <div class="detail-item">
                        <span>Provider:</span>
                        <span>Supabase Storage</span>
                    </div>
                    <div class="detail-item">
                        <span>Storage Used:</span>
                        <span>2.3 GB</span>
                    </div>
                    <div class="detail-item">
                        <span>Available Space:</span>
                        <span>47.7 GB</span>
                    </div>
                </div>
            </div>

            <!-- API Status -->
            <div class="status-card">
                <div class="status-header">
                    <div class="status-icon">
                        <i data-lucide="server"></i>
                    </div>
                    <h3>API Status</h3>
                    <div class="status-indicator">
                        <div class="status-dot online"></div>
                    </div>
                </div>
                <div class="status-details">
                    <div class="detail-item">
                        <span>Server Status:</span>
                        <span>Online</span>
                    </div>
                    <div class="detail-item">
                        <span>Response Time:</span>
                        <span>120ms</span>
                    </div>
                    <div class="detail-item">
                        <span>Uptime:</span>
                        <span>15d 8h</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- System Metrics -->
        <div class="metrics-section">
            <h2>System Metrics</h2>
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-header">
                        <i data-lucide="trending-up"></i>
                        <h4>Uptime Statistics</h4>
                    </div>
                    <div class="metric-content">
                        <div class="uptime-stats">
                            <div class="uptime-item">
                                <span class="uptime-period">Last 24h</span>
                                <span class="uptime-value">99.8%</span>
                            </div>
                            <div class="uptime-item">
                                <span class="uptime-period">Last 7 days</span>
                                <span class="uptime-value">99.5%</span>
                            </div>
                            <div class="uptime-item">
                                <span class="uptime-period">Last 30 days</span>
                                <span class="uptime-value">99.2%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="metric-card">
                    <div class="metric-header">
                        <i data-lucide="activity"></i>
                        <h4>Performance Metrics</h4>
                    </div>
                    <div class="metric-content">
                        <div class="performance-stats">
                            <div class="perf-item">
                                <span>Avg Response Time</span>
                                <span>150ms</span>
                            </div>
                            <div class="perf-item">
                                <span>Requests/min</span>
                                <span>45</span>
                            </div>
                            <div class="perf-item">
                                <span>Error Rate</span>
                                <span>0.2%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <style>
        .refresh-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 16px 20px;
            margin-bottom: 24px;
        }

        .status-overview {
            margin-bottom: 32px;
        }

        .overall-status {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border: none;
            padding: 24px;
        }

        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }

        .status-card {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
        }

        .status-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid #f0f0f0;
        }

        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .status-dot.online {
            background: #10b981;
            box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.2);
        }

        .status-details {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            font-size: 0.9em;
        }

        .monospace {
            font-family: monospace;
            font-size: 0.8em;
        }

        .metrics-section {
            margin: 32px 0;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .metric-card {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
        }

        .metric-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .uptime-stats,
        .performance-stats {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .uptime-item,
        .perf-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 12px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .uptime-value {
            font-weight: 700;
            color: #10b981;
        }
    </style>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }

            // Auto-refresh functionality
            let autoRefreshEnabled = true;
            let refreshInterval = 60;
            let countdownTimer;

            function startCountdown() {
                let countdown = refreshInterval;
                const countdownElement = document.getElementById('refreshCountdown');

                countdownTimer = setInterval(() => {
                    countdown--;
                    countdownElement.textContent = countdown;

                    if (countdown <= 0) {
                        countdown = refreshInterval;
                        updateLastRefreshTime();
                    }
                }, 1000);
            }

            function updateLastRefreshTime() {
                document.getElementById('lastUpdated').textContent =
                    `Last updated: ${new Date().toLocaleTimeString()}`;
            }

            // Initialize
            updateLastRefreshTime();
            startCountdown();

            // Event listeners
            document.getElementById('refreshNow').addEventListener('click', () => {
                updateLastRefreshTime();
            });

            document.getElementById('toggleAutoRefresh').addEventListener('click', (e) => {
                autoRefreshEnabled = !autoRefreshEnabled;
                const button = e.target;

                if (autoRefreshEnabled) {
                    button.innerHTML = '<i data-lucide="pause"></i> Pause Auto-refresh';
                    startCountdown();
                } else {
                    button.innerHTML = '<i data-lucide="play"></i> Resume Auto-refresh';
                    if (countdownTimer) clearInterval(countdownTimer);
                    document.getElementById('refreshCountdown').textContent = '--';
                }

                if (typeof lucide !== 'undefined') {
                    lucide.createIcons();
                }
            });
        });
    </script>
    <script src="footer.js"></script>
</body>

</html>