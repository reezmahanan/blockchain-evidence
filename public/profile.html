<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="favicon.png" type="image/png">
    <link rel="shortcut icon" href="favicon.png" type="image/png">
    <title>Profile | Blockchain Evidence</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="responsive-improvements.css">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="config.js"></script>
    <script src="storage.js"></script>
    <script src="app.js"></script>
</head>

<body>
    <nav class="header-nav">
        <div class="navbar-container">
            <a href="index.html" class="nav-brand">
                <i data-lucide="shield-check" class="brand-icon"></i>
                <span>EVID-DGC</span>
            </a>
            <div class="nav-items">
                <a href="dashboard.html" class="nav-link">Dashboard</a>
                <button class="btn btn-outline btn-sm" onclick="EVID_DGC.logout()">Logout</button>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="hero-section" style="margin: 40px 0; text-align: left;">
            <h1>User Profile</h1>
            <p class="hero-subtitle">Manage your account and personal information</p>
        </div>

        <div class="card">
            <div class="card-header" style="text-align: left;">
                <div style="display: flex; align-items: center; gap: 20px;">
                    <div class="user-avatar" style="width: 100px; height: 100px; font-size: 2rem;">
                        <i data-lucide="user"></i>
                    </div>
                    <div>
                        <h2 id="profileName">Loading...</h2>
                        <p id="profileRole" class="badge">Loading...</p>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Wallet Address</label>
                        <input type="text" id="profileWallet" class="form-control" readonly>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="profileEmail" class="form-control" readonly>
                    </div>
                    <div class="form-group">
                        <label>Department</label>
                        <input type="text" id="profileDept" class="form-control" readonly>
                    </div>
                    <div class="form-group">
                        <label>Registration Date</label>
                        <input type="text" id="profileDate" class="form-control" readonly>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            lucide.createIcons();
            loadProfileData();
        });

        function loadProfileData() {
            const currentUser = localStorage.getItem('currentUser');
            if (!currentUser) {
                window.location.href = 'index.html';
                return;
            }

            const userData = JSON.parse(localStorage.getItem('evidUser_' + currentUser) || '{}');

            document.getElementById('profileName').textContent = userData.fullName || 'User';
            document.getElementById('profileRole').textContent = userData.role ? formatRole(userData.role) : 'User';
            document.getElementById('profileWallet').value = userData.walletAddress || currentUser;
            document.getElementById('profileEmail').value = userData.email || 'N/A';
            document.getElementById('profileDept').value = userData.department || 'N/A';

            if (userData.registrationDate) {
                document.getElementById('profileDate').value = new Date(userData.registrationDate).toLocaleDateString();
            }
        }

        function formatRole(role) {
            if (typeof role === 'number') return 'Role ' + role;
            return role.split('_').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');
        }
    </script>
    <script src="footer.js"></script>
</body>

</html>